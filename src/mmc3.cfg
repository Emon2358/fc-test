MEMORY {
    HEADER:    start = $0000, size = $0010, file = %O, fill = yes;
    ZP:        start = $0000, size = $0100, type = rw;              # Zero page ($00-$FF)
    RAM:       start = $0100, size = $02F0, type = rw;              # CPU Work RAM ($0100-$03FF)
    PRG0:      start = $8000, size = $4000, file = %O, fill = yes, bank = 0;  # $8000-$BFFF (16KB PRG bank0)
    PRG1:      start = $C000, size = $4000, file = %O, fill = yes, bank = 1;  # $C000-$FFFF (16KB PRG bank1)
    SRAM:      start = $6000, size = $2000, file = %O, fill = yes, bank = 2;  # mapper SRAM / ツール用領域
    CHR:       start = $0000, size = $2000, file = %O, fill = yes;            # CHR 8KB（PPU領域扱い）
    VIDEO_CHR: start = $2000, size = $2000, file = %O, fill = yes;            # 補助CHR領域（必要なら拡張）
}

SEGMENTS {
    HEADER:     load = HEADER,    type = ro;
    CODE:       load = PRG0,      type = ro, align = $100;      # メインコードは PRG0 に
    RODATA:     load = PRG1,      type = ro, align = $100;      # 定数・リソースを PRG1 に
    VIDEO_MAP:  load = SRAM,      type = ro, align = $100;      # マップ等は SRAM に置く（領域を十分に）
    VECTORS:    load = PRG1,      type = ro, start = $FFFA;     # ベクタは $FFFA-$FFFF に（PRG1に収まる）
    CHR:        load = CHR,       type = ro;                    # CHRデータを CHR メモリに
    VIDEO_CHR:  load = VIDEO_CHR, type = ro, align = $100;      # 補助CHRを別領域に
    ZEROPAGE:   load = ZP,        type = zp, start = $0002;
    BSS:        load = RAM,       type = bss, start = $0300;    # ワーク変数用（$0300 以降）
}
